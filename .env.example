# Langflow Configuration Example for Pixi Environment
# Copy this file to .env and customize the values
# This file configures Langflow to work with Ollama embeddings
# Usage: Langflow automatically reads this file from the project root
# DO NOT commit .env to version control!

# ============================================================================
# Directory & Storage Configuration
# ============================================================================

# Config directory - stores files, logs and database
# NOTE: Commenting out LANGFLOW_CONFIG_DIR due to bug with profile pictures 500 error
# See: https://github.com/langflow-ai/langflow/issues/5568
# See: https://github.com/langflow-ai/langflow/issues/6922
# LANGFLOW_CONFIG_DIR=.langflow

# Save database in the config directory (true = portable, false = system-wide)
LANGFLOW_SAVE_DB_IN_CONFIG_DIR=true

# Database URL - using SQLite for simplicity
# For production, consider PostgreSQL:
# LANGFLOW_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/langflow
LANGFLOW_DATABASE_URL=sqlite:///.langflow/langflow.db

# Database connection retry
LANGFLOW_DATABASE_CONNECTION_RETRY=true

# ============================================================================
# Server Configuration
# ============================================================================

# Server host - 0.0.0.0 allows external connections
LANGFLOW_HOST=0.0.0.0

# Server port
LANGFLOW_PORT=7860

# Number of worker processes (adjust based on your CPU cores)
LANGFLOW_WORKERS=1

# ============================================================================
# Logging Configuration
# ============================================================================

# Logging level: debug, info, warning, error, critical
LANGFLOW_LOG_LEVEL=info

# Path to the log file
# LANGFLOW_LOG_FILE=.langflow/logs/langflow.log

# Log rotation: by size ('50 MB') or time ('1 day')
LANGFLOW_LOG_ROTATION=50 MB

# ============================================================================
# Cache Configuration
# ============================================================================

# Cache type: async, memory, redis
# memory = ThreadingInMemoryCache (good for development)
# async = AsyncInMemoryCache (better performance)
# redis = RedisCache (for production with multiple workers)
LANGFLOW_CACHE_TYPE=async

# Langchain cache type (InMemoryCache to avoid database files outside .langflow)
# Note: SQLiteCache would create files in the current directory which we want to avoid
LANGFLOW_LANGCHAIN_CACHE=InMemoryCache

# Redis configuration (only needed if LANGFLOW_CACHE_TYPE=redis)
# LANGFLOW_REDIS_HOST=localhost
# LANGFLOW_REDIS_PORT=6379
# LANGFLOW_REDIS_DB=0
# LANGFLOW_REDIS_CACHE_EXPIRE=3600

# ============================================================================
# Authentication & Security
# ============================================================================

# Auto login - set to false for production environments
LANGFLOW_AUTO_LOGIN=false

# Enable superuser creation via CLI
LANGFLOW_ENABLE_SUPERUSER_CLI=true

# Superuser credentials (required if LANGFLOW_AUTO_LOGIN=false)
LANGFLOW_SUPERUSER=admin
LANGFLOW_SUPERUSER_PASSWORD=changeme

# Remove API keys from saved projects (security feature)
LANGFLOW_REMOVE_API_KEYS=false

# Store environment variables in database
LANGFLOW_STORE_ENVIRONMENT_VARIABLES=true

# ============================================================================
# UI & UX Configuration
# ============================================================================

# Open browser automatically after starting server
LANGFLOW_OPEN_BROWSER=false

# Frontend path (usually not needed unless using custom build)
# LANGFLOW_FRONTEND_PATH=

# ============================================================================
# Feature Flags
# ============================================================================

# Enable MCP composer feature in MCP projects
LANGFLOW_MCP_COMPOSER_ENABLED=true

# ============================================================================
# Integration URLs
# ============================================================================

# Backend URL (must end with /)
BACKEND_URL=http://localhost:7860/

# Langflow Store URL
# LANGFLOW_STORE_URL=https://api.langflow.store

# Webhook URLs for analytics
# LANGFLOW_DOWNLOAD_WEBHOOK_URL=
# LANGFLOW_LIKE_WEBHOOK_URL=

# ============================================================================
# Environment Variables for Global Access
# ============================================================================

# Variables to import from environment into Langflow global variables
# Format: comma-separated list or JSON array
# Example: LANGFLOW_VARIABLES_TO_GET_FROM_ENVIRONMENT=OPENAI_API_KEY,ANTHROPIC_API_KEY
# Example: LANGFLOW_VARIABLES_TO_GET_FROM_ENVIRONMENT=["OPENAI_API_KEY","ANTHROPIC_API_KEY"]
LANGFLOW_VARIABLES_TO_GET_FROM_ENVIRONMENT=OLLAMA_BASE_URL,OPENAI_API_KEY,ANTHROPIC_API_KEY,GOOGLE_API_KEY,HUGGINGFACEHUB_API_TOKEN,OPENROUTER_API_KEY,DEEPSEEK_API_KEY,ASTRA_DB_API_ENDPOINT,ASTRA_DB_APPLICATION_TOKEN

# Fallback to environment variables if global variable is not set
LANGFLOW_FALLBACK_TO_ENV_VAR=true

# ============================================================================
# Ollama Integration Configuration
# ============================================================================

# Ollama base URL (configured to use local Ollama server)
OLLAMA_BASE_URL=http://localhost:11434

# Ollama models directory (stored locally in project)
# Note: This is set in pixi.toml tasks, but documented here for reference
# OLLAMA_MODELS=.ollama/models

# ============================================================================
# Optional API Keys (uncomment and add your keys as needed)
# ============================================================================

# OpenAI API Key
# OPENAI_API_KEY=sk-...

# Anthropic API Key
# ANTHROPIC_API_KEY=sk-ant-...

# OpenRouter API Key
# OPENROUTER_API_KEY=sk-or-v1-...

# DeepSeek API Key
# DEEPSEEK_API_KEY=sk-...

# Google API Key
# GOOGLE_API_KEY=...

# Astra DB API Endpoint
# ASTRA_DB_API_ENDPOINT=https://...
# ASTRA_DB_APPLICATION_TOKEN=AstraCS:...

# Cohere API Key
# COHERE_API_KEY=...

# HuggingFace API Token
# HUGGINGFACEHUB_API_TOKEN=...

# ============================================================================
# Development & Debugging
# ============================================================================

# Disable tracking (privacy)
DO_NOT_TRACK=true

# Backend only mode (no frontend)
# LANGFLOW_BACKEND_ONLY=false

# Custom components path
LANGFLOW_COMPONENTS_PATH=custom-langflow/components

# Worker timeout
LANGFLOW_WORKER_TIMEOUT=1200
